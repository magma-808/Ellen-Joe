<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ellen Joe - Assistente Virtual</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: #0a0a0a;
            color: #f0f0f0;
            padding: 20px;
            background-image: radial-gradient(circle at 20% 30%, rgba(255, 0, 60, 0.1) 0%, transparent 40%);
        }
        .container { max-width: 1000px; margin: 0 auto; }
        
        header { 
            text-align: center; 
            padding: 20px 0; 
            border-bottom: 2px solid #ff003c;
            margin-bottom: 20px;
        }
        .logo {
            color: #ff003c;
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(255, 0, 60, 0.5);
        }
        .subtitle { color: #aaa; }
        
        .main { display: flex; gap: 20px; margin: 20px 0; }
        @media (max-width: 768px) { .main { flex-direction: column; } }
        
        .chat-box {
            flex: 2;
            background: #111;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #ff003c;
        }
        
        #messages {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 0, 60, 0.3);
        }
        
        .message { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .user { background: rgba(255, 0, 60, 0.2); text-align: right; }
        .bot { background: rgba(30, 30, 40, 0.8); text-align: left; }
        .sender { font-weight: bold; margin-bottom: 5px; }
        .user .sender { color: #ff00ff; }
        .bot .sender { color: #ff003c; }
        
        .input-area {
            display: flex;
            gap: 10px;
        }
        #userInput {
            flex: 1;
            padding: 12px;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #ff003c;
            border-radius: 5px;
            color: white;
            font-size: 16px;
        }
        #sendBtn {
            background: linear-gradient(45deg, #ff003c, #ff00ff);
            border: none;
            border-radius: 5px;
            color: white;
            padding: 0 20px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .panel {
            background: #111;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #ff003c;
        }
        
        .panel h3 {
            color: #ff003c;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 0, 60, 0.3);
            padding-bottom: 5px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: rgba(40, 40, 60, 0.8);
            border: 1px solid rgba(255, 0, 60, 0.3);
            border-radius: 5px;
            color: white;
            cursor: pointer;
            text-align: left;
        }
        .btn:hover {
            background: rgba(255, 0, 60, 0.2);
        }
        
        #apiKey {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #ff003c;
            border-radius: 5px;
            color: white;
        }
        
        footer {
            text-align: center;
            padding: 20px 0;
            color: #666;
            border-top: 1px solid rgba(255, 0, 60, 0.3);
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">Ellen Joe</div>
            <div class="subtitle">Assistente Virtual com DeepSeek AI</div>
        </header>
        
        <div class="main">
            <div class="chat-box">
                <div id="messages">
                    <div class="message bot">
                        <div class="sender">Ellen Joe</div>
                        <div>Olá! Eu sou a Ellen Joe. Como posso ajudar?</div>
                    </div>
                </div>
                
                <div class="input-area">
                    <input type="text" id="userInput" placeholder="Digite sua mensagem...">
                    <button id="sendBtn">Enviar</button>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="panel">
                    <h3>Configuração API</h3>
                    <input type="password" id="apiKey" placeholder="Cole sua API Key do DeepSeek">
                    <button class="btn" id="saveApi">Salvar API Key</button>
                    <button class="btn" id="clearApi">Limpar API Key</button>
                    <p style="margin-top: 10px; font-size: 12px; color: #aaa;">
                        Obtenha uma API Key em: platform.deepseek.com
                    </p>
                </div>
                
                <div class="panel">
                    <h3>Ações Rápidas</h3>
                    <button class="btn" id="btnTest">Testar IA</button>
                    <button class="btn" id="btnStory">História do ZZZ</button>
                    <button class="btn" id="btnTech">Tecnologia</button>
                    <button class="btn" id="btnClear">Limpar Chat</button>
                </div>
                
                <div class="panel">
                    <h3>Status</h3>
                    <p><strong>API:</strong> <span id="apiStatus">Não configurada</span></p>
                    <p><strong>Mensagens:</strong> <span id="msgCount">1</span></p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Ellen Joe Assistente Virtual © 2023</p>
        </footer>
    </div>

    <script>
        // Código JavaScript SIMPLES que FUNCIONA
        console.log("Script iniciado!");
        
        // Elementos
        const messagesDiv = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const apiKeyInput = document.getElementById('apiKey');
        const apiStatus = document.getElementById('apiStatus');
        const msgCount = document.getElementById('msgCount');
        
        let messageCount = 1;
        let savedApiKey = localStorage.getItem('ellenApiKey') || '';
        
        // Se já tiver API Key salva
        if (savedApiKey) {
            apiKeyInput.value = '••••••••••••••••';
            apiStatus.textContent = 'Configurada';
            apiStatus.style.color = '#00ff88';
        }
        
        // Função para adicionar mensagem
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            const senderDiv = document.createElement('div');
            senderDiv.className = 'sender';
            senderDiv.textContent = isUser ? 'Você' : 'Ellen Joe';
            
            const textDiv = document.createElement('div');
            textDiv.textContent = text;
            
            messageDiv.appendChild(senderDiv);
            messageDiv.appendChild(textDiv);
            messagesDiv.appendChild(messageDiv);
            
            if (isUser) {
                messageCount++;
                msgCount.textContent = messageCount;
            }
            
            // Rolar para baixo
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
        
        // Função para enviar mensagem
        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            
            // Adicionar mensagem do usuário
            addMessage(text, true);
            userInput.value = '';
            
            // Mostrar "digitando..."
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.innerHTML = '<div class="sender">Ellen Joe</div><div>Digitando...</div>';
            messagesDiv.appendChild(typingDiv);
            
            // Obter resposta
            setTimeout(async () => {
                // Remover "digitando..."
                messagesDiv.removeChild(typingDiv);
                
                let response;
                if (savedApiKey) {
                    // Tentar usar API do DeepSeek
                    try {
                        response = await getDeepSeekResponse(text);
                    } catch (error) {
                        console.error("Erro API:", error);
                        response = "Erro na API. Usando modo local: " + getLocalResponse(text);
                    }
                } else {
                    // Usar modo local
                    response = getLocalResponse(text);
                }
                
                addMessage(response, false);
            }, 1000);
        }
        
        // Função para obter resposta da DeepSeek API
        async function getDeepSeekResponse(userMessage) {
            if (!savedApiKey) throw new Error("API Key não configurada");
            
            const response = await fetch('https://api.deepseek.com/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${savedApiKey}`
                },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {
                            role: "system",
                            content: "Você é Ellen Joe, uma assistente virtual inteligente e útil. Responda em português."
                        },
                        { role: "user", content: userMessage }
                    ],
                    max_tokens: 500,
                    temperature: 0.7
                })
            });
            
            if (!response.ok) {
                throw new Error(`Erro API: ${response.status}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content;
        }
        
        // Função para respostas locais
        function getLocalResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('olá') || msg.includes('oi') || msg.includes('eae')) {
                return "Olá! Tudo bem? Como posso ajudar você hoje?";
            }
            if (msg.includes('como você está')) {
                return "Estou funcionando perfeitamente! Obrigada por perguntar!";
            }
            if (msg.includes('qual seu nome')) {
                return "Eu sou Ellen Joe, sua assistente virtual!";
            }
            if (msg.includes('história') || msg.includes('zzz')) {
                return "Zenless Zone Zero é um RPG de ação em um mundo pós-apocalíptico!";
            }
            if (msg.includes('tecnologia')) {
                return "A tecnologia no ZZZ é muito avançada, com IA, realidade virtual e muito mais!";
            }
            if (msg.includes('api') || msg.includes('deepseek')) {
                return "Para usar a DeepSeek API, cole sua chave no campo à direita e clique em Salvar!";
            }
            
            return "Interessante! Para respostas mais completas, configure sua API Key do DeepSeek.";
        }
        
        // Event Listeners - ESTA É A PARTE IMPORTANTE!
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
        
        // Botão Salvar API
        document.getElementById('saveApi').addEventListener('click', function() {
            const key = apiKeyInput.value.trim();
            if (key && !key.includes('••')) {
                savedApiKey = key;
                localStorage.setItem('ellenApiKey', key);
                apiKeyInput.value = '••••••••••••••••';
                apiStatus.textContent = 'Configurada';
                apiStatus.style.color = '#00ff88';
                alert('API Key salva com sucesso!');
            } else {
                alert('Por favor, insira uma API Key válida');
            }
        });
        
        // Botão Limpar API
        document.getElementById('clearApi').addEventListener('click', function() {
            savedApiKey = '';
            localStorage.removeItem('ellenApiKey');
            apiKeyInput.value = '';
            apiStatus.textContent = 'Não configurada';
            apiStatus.style.color = '';
            alert('API Key removida');
        });
        
        // Botões de ação
        document.getElementById('btnTest').addEventListener('click', function() {
            userInput.value = "Teste da IA: explique o que é inteligência artificial";
            sendMessage();
        });
        
        document.getElementById('btnStory').addEventListener('click', function() {
            userInput.value = "Conte a história de Zenless Zone Zero";
            sendMessage();
        });
        
        document.getElementById('btnTech').addEventListener('click', function() {
            userInput.value = "Fale sobre tecnologia no ZZZ";
            sendMessage();
        });
        
        document.getElementById('btnClear').addEventListener('click', function() {
            while (messagesDiv.children.length > 1) {
                messagesDiv.removeChild(messagesDiv.lastChild);
            }
            messageCount = 1;
            msgCount.textContent = messageCount;
            addMessage("Chat limpo! Como posso ajudar?", false);
        });
        
        console.log("Event listeners configurados!");
        
        // Focar no input
        userInput.focus();
    </script>
</body>
                                                                        </html>
